<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>ЁЯТе рд╢реБрдн рджреАрдкрд╛рд╡рд▓реА ЁЯТе</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
<style>
html,body{margin:0;padding:0;height:100%;overflow:hidden;font-family:'Poppins',sans-serif;}
body{display:flex;align-items:center;justify-content:center;background:linear-gradient(-45deg,#ff9a9e,#fad0c4,#a18cd1,#fbc2eb);background-size:400% 400%;animation:grad 14s ease infinite;}
@keyframes grad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.wrap{width:100%;max-width:380px;height:100vh;padding:18px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:12px;position:relative;z-index:2;box-sizing:border-box;}
.card{width:100%;background:rgba(0,0,0,0.06);border-radius:14px;padding:14px;backdrop-filter: blur(6px);text-align:center;color:#fff;box-shadow:0 10px 30px rgba(0,0,0,0.18);}
.name-input{width:100%;max-width:320px;padding:12px 14px;border-radius:12px;border:none;outline:none;font-size:16px;background:rgba(255,255,255,0.08);color:#fff;}
.primary-btn{width:100%;max-width:320px;padding:12px 14px;border-radius:12px;border:none;font-weight:700;background:linear-gradient(90deg,#ff6f00,#ff0080);color:#fff;font-size:16px;cursor:pointer;}
.primary-btn:active{transform:translateY(1px)}
.primary-btn[disabled]{opacity:0.6}
.wish-name{font-size:clamp(20px,5.5vw,36px);font-weight:800;margin-top:8px;text-shadow:0 6px 18px rgba(0,0,0,0.45);}
.wish-message{font-size:clamp(14px,4.2vw,20px);margin-top:6px;color:#fffdf2;line-height:1.4;text-shadow:0 4px 12px rgba(0,0,0,0.35);}
.share-row{display:flex;gap:8px;align-items:center;justify-content:center;margin-top:10px;flex-wrap:wrap}
.share-url{display:block;margin-top:10px;padding:8px 10px;border-radius:8px;background:rgba(0,0,0,0.25);font-size:13px;color:#fff;word-break:break-all;}
.visuals-layer{position:fixed;inset:0;z-index:1;pointer-events:none;}
.ad-banner{position:fixed;bottom:8px;left:50%;transform:translateX(-50%);z-index:50;background:rgba(0,0,0,0.45);padding:8px 12px;border-radius:10px;color:#fff;font-size:13px;}
.reward-note{position:fixed;bottom:70px;left:50%;transform:translateX(-50%);z-index:50;background:rgba(255,215,0,0.95);padding:8px 12px;border-radius:10px;color:#000;font-weight:700;display:none;}
.hidden{display:none;}
</style>
</head>
<body>

<div class="wrap">
  <div class="card" id="uiCard">
    <div style="font-size:14px;font-weight:700;margin-bottom:8px">ЁЯМЯ рд╢реБрдн рджреАрдкрд╛рд╡рд▓реА ЁЯМЯ</div>
    <div id="wishTop" class="hidden">
      <div class="wish-name" id="wishName"></div>
      <div class="wish-message" id="wishMessage">рдорд╛рддрд╛ рд▓рдХреНрд╖реНрдореА рдЖрдкрдХреЗ рдШрд░ рдореЗрдВ<br>рд╕реЛрдирд╛, рдЪрд╛рдВрджреА рдФрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рд▓реЗрдХрд░ рдЖрдПрдБ!<br>ЁЯЩПЁЯкФ рд╢реБрдн рджреАрдкрд╛рд╡рд▓реА ЁЯкФЁЯЩП</div>
    </div>
    <div id="inputArea">
      <input id="nameInput" class="name-input" placeholder="рдЕрдкрдирд╛ рдирд╛рдо рд▓рд┐рдЦреЗрдВ..." inputmode="text" />
      <div style="height:8px"></div>
      <button id="generateBtn" class="primary-btn">ЁЯМЯ Wish Generate рдХрд░реЗрдВ</button>
    </div>
    <div id="afterArea" class="hidden" style="margin-top:8px">
      <div class="share-row">
        <button id="shareBtn" class="primary-btn">ЁЯФЧ Share Wish (Image + Link)</button>
      </div>
      <div id="shareUrlBlock" class="share-url hidden"></div>
    </div>
  </div>
</div>

<div class="visuals-layer" id="visuals"></div>
<div class="ad-banner">Banner Ad Placeholder</div>
<div class="reward-note" id="rewardNote">ЁЯОБ You earned 100 points!</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
/* ---------------- Color Blast + Spark + Confetti ---------------- */
const visuals = document.getElementById('visuals');

function createParticle(x, y, color, size, lifespan, type='circle'){
  const el = document.createElement('div');
  Object.assign(el.style,{
    position:'absolute',
    left: (x-size/2)+'px',
    top: (y-size/2)+'px',
    width: size+'px',
    height: size+'px',
    borderRadius: type==='circle'?'50%':'0%',
    background:color,
    pointerEvents:'none',
    zIndex:1,
    animation:`particleAnim ${lifespan}ms ease-out forwards`,
  });
  visuals.appendChild(el);
  setTimeout(()=>el.remove(), lifespan+50);
}

/* Particle keyframes */
const styleEl = document.createElement('style');
styleEl.textContent=`
@keyframes particleAnim{
  0%{transform:translateY(0) scale(1);opacity:1;}
  100%{transform:translateY(-120vh) scale(0.2);opacity:0;}
}`;
document.head.appendChild(styleEl);

function randomColor(){ return `hsl(${Math.random()*360},100%,60%)`; }
setInterval(()=>{
  for(let i=0;i<8;i++){
    createParticle(Math.random()*window.innerWidth, window.innerHeight+10, randomColor(), 8+Math.random()*12, 1800);
  }
},150);

function createBlast(cx, cy, count=12, lifespan=1000){
  for(let i=0;i<count;i++){
    const size = 10 + Math.random()*18;
    createParticle(cx+Math.random()*80-40, cy+Math.random()*80-40, randomColor(), size, lifespan);
  }
}
setInterval(()=>{
  createBlast(Math.random()*window.innerWidth, Math.random()*window.innerHeight, 10, 1000);
}, 2500);

/* ---------------- App logic ---------------- */
const generateBtn = document.getElementById('generateBtn');
const shareBtn = document.getElementById('shareBtn');
const nameInput = document.getElementById('nameInput');
const inputArea = document.getElementById('inputArea');
const afterArea = document.getElementById('afterArea');
const wishTop = document.getElementById('wishTop');
const wishNameEl = document.getElementById('wishName');
const wishMessageEl = document.getElementById('wishMessage');
const shareUrlBlock = document.getElementById('shareUrlBlock');
const rewardNote = document.getElementById('rewardNote');

function makeShareableUrl(namePlain){
  const base = window.location.href.split('?')[0];
  return `${base}?name=${encodeURIComponent(namePlain)}`;
}

window.addEventListener('load', ()=>{
  const p = new URLSearchParams(window.location.search);
  const sharedName = p.get('name');
  if(sharedName){
    wishNameEl.textContent = `ЁЯТБтАНтЩВ ${sharedName} рдХреА рдУрд░ рд╕реЗ рд╢реБрдн рджреАрдкрд╛рд╡рд▓реА ЁЯМЯ`;
    wishTop.classList.remove('hidden');
    inputArea.style.display='none';
    afterArea.classList.remove('hidden');
    shareUrlBlock.classList.remove('hidden');
    shareUrlBlock.textContent = makeShareableUrl(sharedName);
    createBlast(window.innerWidth/2, window.innerHeight/3, 22, 1400);
  }
});

generateBtn.addEventListener('click', ()=>{
  const nm = nameInput.value.trim();
  if(!nm){ alert('рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдирд╛рдо рд▓рд┐рдЦреЗрдВ'); nameInput.focus(); return; }
  wishNameEl.textContent = `ЁЯТБтАНтЩВ ${nm} рдХреА рдУрд░ рд╕реЗ рд╢реБрдн рджреАрдкрд╛рд╡рд▓реА ЁЯМЯ`;
  wishTop.classList.remove('hidden');
  inputArea.style.display='none';
  afterArea.classList.remove('hidden');
  shareUrlBlock.classList.remove('hidden');
  shareUrlBlock.textContent = makeShareableUrl(nm);
  createBlast(window.innerWidth/2, window.innerHeight/3, 26, 1400);
});

/* ---------------- Server-less Imgur + WhatsApp ---------------- */
async function shareWish(){
  shareBtn.disabled=true; shareBtn.textContent='Preparing...';
  try{
    const canvas = await html2canvas(document.getElementById('uiCard'));
    const blob = await new Promise(res=>canvas.toBlob(res,'image/png'));
    const clientId = 'YOUR_IMGUR_CLIENT_ID'; // Replace with your Imgur client id
    const formData = new FormData();
    formData.append('image', blob);
    const resp = await fetch('https://api.imgur.com/3/image', {
      method:'POST',
      headers:{Authorization:`Client-ID ${clientId}`},
      body: formData
    });
    const data = await resp.json();
    if(!data.success) throw new Error('Upload failed');
    const imageUrl = data.data.link;
    const nameText = wishNameEl.textContent;
    const wishText = wishMessageEl.innerText;
    const waText = encodeURIComponent(`${nameText}\n${wishText}\n\n${imageUrl}`);
    const waUrl = `https://wa.me/?text=${waText}`;
    window.open(waUrl,'_blank');
    rewardNote.style.display='block';
    setTimeout(()=>rewardNote.style.display='none',3000);
    createBlast(window.innerWidth/
